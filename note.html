<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>N073b00k - A Simple Online Notebook</title>
</head>

<body style="margin-left:3%;">

<h1 style="line-height:0.5;font-family:courier new;">N073b00k</h1>
<h2>A simple online notebook</h2>
<textarea id="thetextarea" style="width:85%;height:300px;" type="text"></textarea>
<br><button onclick="save_note()" style="float:right;margin-right:15%;">SAVE</button>
<br>

<!--LOGIN
<h3>Login</h3>
<form action="get-text.php" method="post">
  <div style="display:inline-block;">
	<label for="name">Username:</label> <input type="text" id="name" name="username">
  </div>
  <div style="display:inline-block;">
	<label for="password">Password:</label> <input type="password" id="password" name="password">
  </div>
  <div class="button" style="display:inline-block;">
	  <button type="submit">OK?</button>
	</div>
</form>
<!--SIGN UP
<h3>Sign up</h3>
<form action="add-user.php" method="post">
  <div style="display:inline-block;">
	<label for="name">Username:</label> <input type="text" id="name" name="username">
  </div>
  <div style="display:inline-block;">
	<label for="password">Password:</label> <input type="password" id="password" name="password">
  </div>
  <div class="button" style="display:inline-block;">
	  <button type="submit">OK?</button>
	</div>
</form>-->

<br><br><hr style="width:10%;float:left;"><br><footer>Â© Pikku-a 2021</footer>

<!--Main javascript-->
<script>

note_id = 1//localStorage.getItem("noteID");

//Load
var loaded = false;
if (loaded == false) {
	loaded = true;
	document.getElementById("thetextarea").value = localStorage.getItem("note1");
}

//Save every 10 seconds
setInterval(save_note,10000);

//Save
function save_note() {
	var notetext = document.getElementById("thetextarea").value;
	localStorage.setItem("note"+note_id,notetext);

	console.log("saved");
}

//Login / get text
function login(username) {
	if (username == "") {
		alert("Insert an username.");
	}
	console.log("login function started");
	window.addEventListener("load", function(){
	  var xhr = new XMLHttpRequest();
	  xhr.open('POST', "get-text.php");
	  xhr.onload = function(){
		document.getElementById("thetextarea").innerHTML = this.response; //?
		console.log("success");
	  };
	  xhr.send();
	});
}
</script>

</body>
</html>